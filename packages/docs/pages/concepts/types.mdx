# Types

With XMTP, text is represented as objects with the following keys:

## Text

The `text` type contains the following

```tsx
const {
  message: {
    content: {
      text, // The content of the message
    },
    typeId: "text",
  },
};
```

- `text`: string - _The content of the message_

### Receive a text message

Here's an example of how you can receive a `text` message in your app:

```tsx
if (typeId === "text") {
  const { text } = content;
  // Use text
}
```

## Replies

The `reply` type contains the following

```tsx
const {
  message: {
    content: {
      reference: someMessageID; //ID of the message being replied to
      reply: "I concur"; //String representation of the reply
      replyChain: [someMessageID], //Array of message IDs that are part of the reply chain
    },
    typeId: "reply",
  }
} = context;
```

- `reference`: string, // ID of the message being replied to
- `reply`: string, // String representation of the reply
- `replyChain`: string[], // Array of message IDs that are part of the reply chain

### Receive a reply

Now that you understand how replies are represented, you can receive them in your app. Here's an example of how you can receive a reply in your app:

```tsx
if (typeId === "reply") {
  // Use reply...
}
```

## Attachment

Any file can be attached to a message. Images, files, videos, audio, and more.

The `attachment` type contains the following

```tsx
const {
  message: {
    content: {
      attachment: { data, filename, mimeType },
    },
    typeId: "attachment",
  },
} = context;
```

The `attachment` object contains the following:

- `data`: Uint8Array; // the decoded data
- `filename`: string; // the filename
- `mimeType`: string; // the mime type

### Activate attachments

For this agent to receive attachments you need to activate attachments in the `run` function.

```tsx [src/index.ts]
import { run, HandlerContext } from "@xmtp/message-kit";

run(
  async (context: HandlerContext) => {
    /*Your code here*/
  },
  {
    attachments: true,
  },
);
```

### Receive an attachment

Now that you understand how images are represented, you can receive them in your app. Here's an example of how you can receive an image in your app:

```tsx
const {
  message: {
    content: {
      attachment: { data, filename, mimeType },
    },
  },
} = context;

if (typeId === "attachment") {
  // Parse the data to a base64 string
  const base64Image = Buffer.from(data).toString("base64");
  // Get the data URL in base64
  const dataUrl = `data:image/jpeg;base64,${base64Image}`;
}
```
