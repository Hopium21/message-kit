# Transactions

This example demonstrates how to generate frame URLs for different types of transactions.

```bash [cmd]
/send 1 eth to @bo
/swap 1 DAI to USDC
/show
```

_The frame used in this example is [Base Tx Frame](https://base-tx.ephemerahq.com)_, made by [builders.garden](https://github.com/builders-garden)

::::note
:::details[Command declaration]

```tsx [src/skills.ts]
import { handler as transaction } from "./handler/transaction.js";
export const commands: AgentSkill[] = [
  {
    name: "Transactions",
    description: "Multipurpose transaction frame built onbase.",
    skills: [
      {
        command: "/send [amount] [token] [username]",
        triggers: ["/send"],
        description:
          "Send a specified amount of a cryptocurrency to a destination address.",
        handler: transaction,
        params: {
          amount: {
            default: 10,
            type: "number",
          },
          token: {
            default: "usdc",
            type: "string",
            values: ["eth", "dai", "usdc", "degen"], // Accepted tokens
          },
          username: {
            default: "",
            type: "username",
          },
        },
      },
      {
        command: "/swap [amount] [token_from] [token_to]",
        triggers: ["/swap"],
        description: "Exchange one type of cryptocurrency for another.",
        handler: transaction,
        params: {
          amount: {
            default: 10,
            type: "number",
          },
          token_from: {
            default: "usdc",
            type: "string",
            values: ["eth", "dai", "usdc", "degen"], // Accepted tokens
          },
          token_to: {
            default: "eth",
            type: "string",
            values: ["eth", "dai", "usdc", "degen"], // Accepted tokenss
          },
        },
      },
      {
        command: "/show",
        triggers: ["/show"],
        handler: transaction,
        description: "Show the whole frame.",
        params: {},
      },
    ],
  },
];
```

:::
::::

## Main code

```tsx [src/handler/transactions.ts]
import { HandlerContext } from "@xmtp/message-kit";
import { getUserInfo } from "../lib/resolver.js";

// Main handler function for processing commands
export async function handler(context: HandlerContext) {
  const {
    message: {
      content: { command, params },
    },
  } = context;
  const baseUrl = "https://base-tx-frame.vercel.app/transaction";

  switch (command) {
    case "send":
      // Destructure and validate parameters for the send command
      const { amount: amountSend, token: tokenSend, username } = params; // [!code hl] // [!code focus]
      let senderInfo = await getUserInfo(username);
      if (!amountSend || !tokenSend || !senderInfo) {
        context.reply(
          "Missing required parameters. Please provide amount, token, and username.",
        );
        return;
      }
      let name = senderInfo.converseUsername || senderInfo.address;

      let sendUrl = `${baseUrl}/?transaction_type=send&amount=${amountSend}&token=${tokenSend}&receiver=${senderInfo.address}`;
      context.send(`${sendUrl}`);
      break;
    case "swap":
      // Destructure and validate parameters for the swap command
      const { amount, token_from, token_to } = params; // [!code hl] // [!code focus]

      if (!amount || !token_from || !token_to) {
        context.reply(
          "Missing required parameters. Please provide amount, token_from, and token_to.",
        );
        return;
      }

      let swapUrl = `${baseUrl}/?transaction_type=swap&token_from=${token_from}&token_to=${token_to}&amount=${amount}`;
      context.send(`${swapUrl}`);
      break;
    case "show": // [!code hl] // [!code focus]
      // Show the base URL without the transaction path
      context.reply(`${baseUrl.replace("/transaction", "")}`);
      break;
    default:
      // Handle unknown commands
      context.reply("Unknown command. Use help to see all available commands.");
  }
}
```
